<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ClawBoss ‚Äî Start Session</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@700;800&display=swap" rel="stylesheet">
<style>
:root{--bg:#0a0a0a;--surface:#111111;--border:#1e1e1e;--accent:#c8f135;--accent-dim:#8aab1f;--text:#e8e8e8;--muted:#555;--warning:#f1a035;--danger:#f13535}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:'DM Mono',monospace;min-height:100vh;display:flex;align-items:center;justify-content:center}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(200,241,53,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(200,241,53,.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none}
.container{width:100%;max-width:520px;padding:24px;position:relative;z-index:1}
.logo{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;letter-spacing:.2em;text-transform:uppercase;color:var(--accent);margin-bottom:4px}
.tagline{font-size:11px;color:var(--muted);letter-spacing:.1em;margin-bottom:32px}
.steps{display:flex;gap:8px;margin-bottom:24px}
.step-dot{width:24px;height:3px;background:var(--border);border-radius:2px;transition:background .3s}
.step-dot.active{background:var(--accent)}
.step-dot.done{background:var(--accent-dim)}
.card{background:var(--surface);border:1px solid var(--border);border-radius:2px;padding:28px}
.card-label{font-size:10px;letter-spacing:.2em;text-transform:uppercase;color:var(--muted);margin-bottom:20px}
.session-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px}
.session-card{background:var(--bg);border:1px solid var(--border);border-radius:2px;padding:16px;cursor:pointer;transition:all .2s}
.session-card:hover{border-color:var(--accent)}
.session-card.selected{border-color:var(--accent);background:#111a00}
.session-card.full-width{grid-column:1/-1}
.session-icon{font-size:20px;margin-bottom:10px}
.session-name{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:var(--text);margin-bottom:4px}
.session-desc{font-size:10px;color:var(--muted);line-height:1.5}
.session-badge{display:inline-block;font-size:9px;letter-spacing:.1em;text-transform:uppercase;padding:2px 6px;border-radius:2px;margin-top:8px}
.badge-free{background:rgba(200,241,53,.15);color:var(--accent)}
.badge-consent{background:rgba(241,160,53,.15);color:var(--warning)}
.consent-notice{background:rgba(241,160,53,.08);border:1px solid rgba(241,160,53,.2);border-radius:2px;padding:12px 16px;font-size:11px;color:var(--warning);line-height:1.6;margin-top:16px;display:none}
.consent-notice.visible{display:block}
.input-group{margin-top:20px}
.input-label{font-size:10px;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);margin-bottom:8px;display:block}
.input-field{width:100%;background:var(--bg);border:1px solid var(--border);border-radius:2px;padding:12px 14px;font-family:'DM Mono',monospace;font-size:13px;color:var(--text);outline:none;transition:border-color .2s}
.input-field:focus{border-color:var(--accent)}
.input-field::placeholder{color:var(--muted)}
.room-hint{font-size:10px;color:var(--muted);margin-top:6px}
.launch-btn{width:100%;margin-top:24px;padding:14px;background:var(--accent);color:#0a0a0a;border:none;border-radius:2px;font-family:'Syne',sans-serif;font-size:13px;font-weight:800;letter-spacing:.15em;text-transform:uppercase;cursor:pointer;transition:all .2s}
.launch-btn:hover{background:#d4ff3a;transform:translateY(-1px);box-shadow:0 8px 24px rgba(200,241,53,.2)}
.launch-btn:disabled{background:var(--border);color:var(--muted);cursor:not-allowed;transform:none;box-shadow:none}
.status{margin-top:16px;font-size:11px;color:var(--muted);text-align:center;min-height:16px}
.status.error{color:var(--danger)}
.status.loading{color:var(--accent)}
.token-box{display:none;margin-top:20px;background:var(--bg);border:1px solid var(--border);border-radius:2px;padding:16px}
.token-box.visible{display:block}
.token-label{font-size:10px;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);margin-bottom:8px}
.token-value{font-size:10px;color:var(--accent-dim);word-break:break-all;line-height:1.6;margin-bottom:12px}
.open-btn{display:block;width:100%;padding:10px;background:transparent;border:1px solid var(--accent);border-radius:2px;color:var(--accent);font-family:'DM Mono',monospace;font-size:11px;letter-spacing:.1em;text-transform:uppercase;cursor:pointer;text-align:center;text-decoration:none;transition:all .2s}
.open-btn:hover{background:rgba(200,241,53,.08)}
.server-config{margin-top:24px;padding-top:20px;border-top:1px solid var(--border)}
.config-row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
</style>
</head>
<body>
<div class="container">
  <div class="logo">‚¨° ClawBoss</div>
  <div class="tagline">AI Voice Session Manager</div>
  <div class="steps">
    <div class="step-dot active" id="step1"></div>
    <div class="step-dot" id="step2"></div>
    <div class="step-dot" id="step3"></div>
  </div>
  <div class="card">
    <div class="card-label">01 ‚Äî Select Session Type</div>
    <div class="session-grid">
      <div class="session-card" data-mode="braindump" onclick="selectMode(this)">
        <div class="session-icon">üß†</div>
        <div class="session-name">Brain Dump</div>
        <div class="session-desc">Unstructured solo thought capture.</div>
        <span class="session-badge badge-free">No Consent</span>
      </div>
      <div class="session-card" data-mode="voicenote" onclick="selectMode(this)">
        <div class="session-icon">üéôÔ∏è</div>
        <div class="session-name">Voice Note</div>
        <div class="session-desc">Quick memo or reminder.</div>
        <span class="session-badge badge-free">No Consent</span>
      </div>
      <div class="session-card" data-mode="1on1" onclick="selectMode(this)">
        <div class="session-icon">üë•</div>
        <div class="session-name">1:1 Meeting</div>
        <div class="session-desc">Two-party session with disclosure.</div>
        <span class="session-badge badge-consent">Consent Required</span>
      </div>
      <div class="session-card" data-mode="conference" onclick="selectMode(this)">
        <div class="session-icon">üè¢</div>
        <div class="session-name">Conference</div>
        <div class="session-desc">Multi-party call with disclosure.</div>
        <span class="session-badge badge-consent">Consent Required</span>
      </div>
      <div class="session-card full-width" data-mode="interview" onclick="selectMode(this)">
        <div class="session-icon">üìã</div>
        <div class="session-name">Interview</div>
        <div class="session-desc">Structured Q&A with full transcript. Consent required before recording begins.</div>
        <span class="session-badge badge-consent">Consent Required</span>
      </div>
    </div>
    <div class="consent-notice" id="consentNotice">
      ‚ö† ClawBoss will announce at session start: <em>"This session is being recorded and transcribed by an AI assistant. By continuing, all participants consent to recording."</em>
    </div>
    <div class="input-group">
      <label class="input-label" for="identityInput">02 ‚Äî Your Name</label>
      <input class="input-field" id="identityInput" type="text" placeholder="e.g. derek" autocomplete="off" oninput="updateState()">
    </div>
    <div class="input-group">
      <label class="input-label" for="roomInput">03 ‚Äî Room Name</label>
      <input class="input-field" id="roomInput" type="text" placeholder="clawboss" value="clawboss" autocomplete="off" oninput="updateState()">
      <div class="room-hint">Leave as "clawboss" for default room</div>
    </div>
    <button class="launch-btn" id="launchBtn" onclick="launch()" disabled>Get Token &amp; Launch ‚Üí</button>
    <div class="status" id="status"></div>
    <div class="token-box" id="tokenBox">
      <div class="token-label">Token Generated</div>
      <div class="token-value" id="tokenValue"></div>
      <a class="open-btn" id="openLink" href="#" target="_blank">Open in LiveKit Playground ‚Üí</a>
    </div>
  </div>
  <div class="server-config">
    <div class="card-label" style="margin-bottom:12px">Server Config</div>
    <div class="config-row">
      <div>
        <label class="input-label" for="serverUrl">Token Server</label>
        <input class="input-field" id="serverUrl" type="text" value="" placeholder="https://your-token-server">
      </div>
      <div>
        <label class="input-label" for="livekitUrl">LiveKit WSS</label>
        <input class="input-field" id="livekitUrl" type="text" value="wss://livekit.lutherbot.com" placeholder="wss://your-domain">
      </div>
    </div>
  </div>
</div>
<script>
let selectedMode=null;
// Auto-detect token server URL from current page
window.onload=()=>{
  document.getElementById('serverUrl').value=window.location.origin;
};
function selectMode(el){
  document.querySelectorAll('.session-card').forEach(c=>c.classList.remove('selected'));
  el.classList.add('selected');
  selectedMode=el.dataset.mode;
  const consentModes=['1on1','conference','interview'];
  document.getElementById('consentNotice').classList.toggle('visible',consentModes.includes(selectedMode));
  document.getElementById('step1').classList.add('done');
  document.getElementById('step2').classList.add('active');
  updateState();
}
function updateState(){
  const identity=document.getElementById('identityInput').value.trim();
  const room=document.getElementById('roomInput').value.trim();
  document.getElementById('launchBtn').disabled=!(selectedMode&&identity&&room);
  if(selectedMode&&identity){
    document.getElementById('step2').classList.add('done');
    document.getElementById('step3').classList.add('active');
  }
}
async function launch(){
  const identity=document.getElementById('identityInput').value.trim();
  const room=document.getElementById('roomInput').value.trim();
  const serverUrl=document.getElementById('serverUrl').value.trim();
  const livekitUrl=document.getElementById('livekitUrl').value.trim();
  const status=document.getElementById('status');
  const btn=document.getElementById('launchBtn');
  btn.disabled=true;
  status.className='status loading';
  status.textContent='Requesting token...';
  try{
    const res=await fetch(`${serverUrl}/token?room=${encodeURIComponent(room)}&identity=${encodeURIComponent(identity)}&mode=${encodeURIComponent(selectedMode)}`);
    if(!res.ok)throw new Error(`Server returned ${res.status}`);
    const data=await res.json();
    document.getElementById('tokenValue').textContent=data.token.substring(0,80)+'...';
    document.getElementById('tokenBox').classList.add('visible');
    document.getElementById('openLink').href=`https://meet.livekit.io/#${encodeURIComponent(JSON.stringify({url:livekitUrl,token:data.token}))}`;
    status.className='status';
    status.textContent=`‚úì ${selectedMode} session ready as "${identity}"`;
    document.getElementById('step3').classList.add('done');
  }catch(err){
    status.className='status error';
    status.textContent=`Error: ${err.message}`;
    btn.disabled=false;
  }
}
</script>
</body>
</html>
